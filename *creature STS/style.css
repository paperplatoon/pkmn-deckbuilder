:root {
  --bg: #0e0f13;
  --panel: #181a20;
  --text: #e6e6e6;
  --muted: #9aa0a6;
  --accent: #6aa9ff;
  /* Responsive base unit and component sizes */
  --u: 1vmin;
  --card-w-ally: clamp(140px, 18vmin, 280px);
  --card-w-enemy: clamp(90px, 11vmin, 180px);
  --card-w-hand: clamp(120px, 16vmin, 240px);
  --badge: clamp(18px, 2.8vmin, 28px);
  --chip-size: clamp(14px, 2.2vmin, 22px);
}

html, body {
  margin: 0;
  padding: 0;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

#app {
  max-width: 96vw;
  margin: 0 auto;
  padding: calc(1.2 * var(--u));
}

/* Hide top title to save space */
#app > h1 { display: none; }

h1 {
  margin: 0 0 12px 0;
  font-size: 20px;
}

#controls, #log {
  background: var(--panel);
  border-radius: calc(0.8 * var(--u));
  padding: calc(1.0 * var(--u));
  margin-bottom: calc(1.0 * var(--u));
}

.row { display: flex; gap: calc(0.8 * var(--u)); flex-wrap: wrap; }
.card { border: 1px solid #2b2f36; padding: calc(0.8 * var(--u)); border-radius: calc(0.6 * var(--u)); min-width: clamp(100px, 12vmin, 180px); }
.pill { display: inline-block; padding: 0 calc(0.8 * var(--u)); height: calc(2.2 * var(--u)); line-height: calc(2.2 * var(--u)); border-radius: 999px; background: #242832; color: var(--muted); font-size: clamp(10px, 1.4vmin, 13px); }

.small { font-size: clamp(10px, 1.4vmin, 13px); color: var(--muted); }

/* Targeting highlights */
.is-target-friendly { outline: 2px solid var(--accent); outline-offset: 2px; border-radius: 8px; }
.is-target-enemy { outline: 2px dotted #ff6a6a; outline-offset: 2px; border-radius: 8px; }

.targetable { cursor: pointer; }

/* Card UI (creatures/enemies) */
.c-card { display: flex; flex-direction: column; gap: calc(0.8 * var(--u)); width: var(--card-w-ally); background: #20242e; border: 1px solid #2b2f36; border-radius: calc(1.0 * var(--u)); padding: calc(1.0 * var(--u)); }
.c-card--enemy { width: var(--card-w-enemy); font-size: 85%; }
.c-card--ally { width: var(--card-w-ally); }
.c-header { position: relative; display: flex; justify-content: center; }
.c-avatar { width: 100%; aspect-ratio: 1 / 1; border-radius: calc(0.8 * var(--u)); overflow: hidden; background: #10131a; }
.c-avatar img { width: 100%; height: 100%; object-fit: cover; display: block; }
.c-badge.hp { position: absolute; top: calc(0.6 * var(--u)); right: calc(0.6 * var(--u)); background: #c12525; color: white; border-radius: 999px; padding: 0 calc(0.6 * var(--u)); min-width: var(--badge); height: var(--badge); display: inline-flex; align-items: center; justify-content: center; font-weight: 700; font-size: clamp(11px, 1.6vmin, 16px); }
.c-badge.block { position: absolute; top: calc(0.6 * var(--u)); left: calc(0.6 * var(--u)); }
.c-name { font-weight: 700; font-size: clamp(12px, 1.8vmin, 18px); }
.c-chips { display: flex; gap: calc(0.6 * var(--u)); min-height: calc(2.2 * var(--u)); }
.chip { display: inline-flex; align-items: center; gap: calc(0.6 * var(--u)); background: #2a2f3a; color: #e0e4ee; padding: 0 calc(0.6 * var(--u)); border-radius: 999px; font-size: clamp(10px, 1.4vmin, 13px); height: calc(2.2 * var(--u)); }
.chip--sword::before { content: '‚öî'; }
.chip--shield::before { content: 'üõ°'; }
.c-moves { display: flex; flex-direction: column; gap: calc(0.6 * var(--u)); }
.move-tile { position: relative; display: block; width: 100%; text-align: left; background: #262b36; color: #e9eef9; border: 1px solid #323846; border-radius: calc(0.8 * var(--u)); padding: calc(0.8 * var(--u)) calc(4.0 * var(--u)) calc(0.8 * var(--u)) calc(0.8 * var(--u)); }
.move-tile .mv-head { font-weight: 700; margin-bottom: calc(0.2 * var(--u)); font-size: clamp(12px, 1.8vmin, 18px); }
.move-tile .move-cost { position: absolute; top: 50%; right: calc(0.6 * var(--u)); transform: translateY(-50%); background: #3a6af3; color: white; border-radius: 999px; min-width: var(--badge); height: var(--badge); display: inline-flex; align-items: center; justify-content: center; font-weight: 700; font-size: clamp(11px, 1.6vmin, 16px); }
.move-tile[disabled] { opacity: 0.5; cursor: not-allowed; }

/* Hand cards */
.h-card { position: relative; display: flex; flex-direction: column; gap: calc(0.8 * var(--u)); width: var(--card-w-hand); background: #20242e; border: 1px solid #2b2f36; border-radius: calc(1.0 * var(--u)); padding: calc(1.0 * var(--u)); }
.h-header { display: grid; grid-template-columns: 1fr; gap: calc(0.6 * var(--u)); }
.h-avatar { width: calc(3.2 * var(--u)); height: calc(3.2 * var(--u)); border-radius: calc(0.8 * var(--u)); display: flex; align-items: center; justify-content: center; font-size: clamp(16px, 2.4vmin, 24px); }
.h--sword { background: #3a1d1d; color: #ff6a6a; }
.h--shield { background: #17263b; color: #6aa9ff; }
.h--star { background: #3a3213; color: #ffd54d; }
.h--creature { background: #243124; color: #9ee89e; }
.h--sword::before { content: '‚öîÔ∏è'; }
.h--shield::before { content: 'üõ°Ô∏è'; }
.h--star::before { content: '‚≠ê'; }
.h--creature::before { content: 'üêæ'; }
.h-title { font-weight: 700; padding-right: calc(3.6 * var(--u)); font-size: clamp(12px, 1.8vmin, 18px); }
.h-cost-badge { position: absolute; top: calc(0.6 * var(--u)); right: calc(0.6 * var(--u)); background: #3a6af3; color: white; border-radius: 999px; min-width: var(--badge); height: var(--badge); display: inline-flex; align-items: center; justify-content: center; font-weight: 700; font-size: clamp(11px, 1.6vmin, 16px); }

/* Battlefield grid & HUD */
.bf-grid { display: grid; grid-template-columns: 1fr 1fr; gap: calc(1.0 * var(--u)); }
.bf-lane { display: flex; flex-wrap: wrap; gap: calc(0.8 * var(--u)); align-items: flex-start; }
.hud-row { display: flex; flex-wrap: wrap; gap: calc(0.8 * var(--u)); align-items: center; margin-bottom: calc(0.8 * var(--u)); }
.player-panel { border: 1px solid #334055; background: linear-gradient(180deg, #1a1f28, #141820); border-radius: 12px; padding: 12px; }
.player-panel { border-radius: calc(1.0 * var(--u)); padding: calc(1.0 * var(--u)); position: relative; }
.energy-bubble { display: inline-flex; align-items: center; justify-content: center; min-width: calc(3.0 * var(--u)); height: calc(3.0 * var(--u)); padding: 0 calc(0.8 * var(--u)); border-radius: 999px; background: #3a6af3; color: white; font-weight: 700; font-size: clamp(11px, 1.6vmin, 16px); }
.energy-bubble--big { min-width: calc(6.0 * var(--u)); height: calc(6.0 * var(--u)); font-size: clamp(14px, 2.2vmin, 20px); }
.mana-well { display: inline-flex; align-items: center; gap: calc(0.6 * var(--u)); padding: calc(0.6 * var(--u)); border: 1px solid #2b2f36; border-radius: calc(0.8 * var(--u)); background: #1b2230; }

/* Drop target hints */
@keyframes sparklePulse {
  0% { box-shadow: 0 0 0 0 rgba(106,169,255,0.4); }
  50% { box-shadow: 0 0 0 8px rgba(106,169,255,0.05); }
  100% { box-shadow: 0 0 0 0 rgba(106,169,255,0.0); }
}
.drop-hint {
  outline: 2px dashed rgba(106,169,255,0.6);
  outline-offset: 2px;
  animation: sparklePulse 1.4s ease-in-out infinite;
}
.drop-hover {
  outline: 3px solid #6aa9ff;
  outline-offset: 2px;
  animation: none;
}
.belt { display: flex; gap: calc(0.8 * var(--u)); align-items: center; margin: calc(0.8 * var(--u)) 0; }
.belt-ball { width: calc(2.4 * var(--u)); height: calc(2.4 * var(--u)); border-radius: 999px; border: 2px solid #2b2f36; background: #22262f; }
.belt-ball--alive { background: #2a5d2a; border-color: #3a7f3a; }
.belt-ball--playable { background: #2a375d; border-color: #3a6af3; cursor: pointer; }
.belt-ball--locked { background: #3a2a2a; border-color: #6b3a3a; opacity: 0.6; }
.belt-region { position: relative; }
.belt-preview { position: absolute; top: calc(100% + 1.0 * var(--u)); left: 0; z-index: 5; }
.belt-preview .c-card { box-shadow: 0 8px 24px rgba(0,0,0,0.35), 0 2px 6px rgba(0,0,0,0.25); }

/* Hand tray scroll on narrow screens */
#hand .row { flex-wrap: nowrap; overflow-x: auto; }

/* Shield chip */
.shield-chip { display: inline-flex; align-items: center; gap: calc(0.4 * var(--u)); background: #263040; color: #9fc7ff; border: 1px solid #2f3a4a; border-radius: 999px; padding: 0 calc(0.6 * var(--u)); height: calc(2.2 * var(--u)); }
.shield-chip svg { width: calc(1.6 * var(--u)); height: calc(1.6 * var(--u)); display: block; }
.shield-chip__num { font-weight: 700; font-size: clamp(10px, 1.4vmin, 13px); }
.shield-chip--sm { background: rgba(38,48,64,0.9); height: calc(1.8 * var(--u)); }
.shield-chip--sm svg { width: calc(1.3 * var(--u)); height: calc(1.3 * var(--u)); }
.shield-chip--sm .shield-chip__num { font-size: clamp(9px, 1.2vmin, 12px); }

/* FX: float text, shake, glow */
@keyframes floatUpFade {
  0% { transform: translateY(0); opacity: 1; }
  100% { transform: translateY(-18px); opacity: 0; }
}
.u-float-text { will-change: transform, opacity; animation: floatUpFade 0.7s ease-out forwards; pointer-events: none; }
@keyframes quickShake {
  0% { transform: translate(0, 0); }
  25% { transform: translate(2px, 0); }
  50% { transform: translate(-2px, 0); }
  75% { transform: translate(1px, 0); }
  100% { transform: translate(0, 0); }
}
.u-shake { animation: quickShake 0.18s linear 1; }
@keyframes glowBlue {
  0% { box-shadow: 0 0 0 0 rgba(106,169,255,0.4); }
  50% { box-shadow: 0 0 16px 0 rgba(106,169,255,0.6); }
  100% { box-shadow: 0 0 0 0 rgba(106,169,255,0.0); }
}
.u-glow-blue { animation: glowBlue 0.45s ease-in-out 1; }
@keyframes pulseRing {
  0% { box-shadow: 0 0 0 0 rgba(106,169,255,0.35); }
  100% { box-shadow: 0 0 0 12px rgba(106,169,255,0); }
}
.u-pulse-ring { animation: pulseRing 0.3s ease-out 1; }

/* FX ghost card */
.fx-ghost-card { 
  border-radius: calc(1.0 * var(--u));
  background: linear-gradient(180deg, rgba(112,192,255,0.9), rgba(58,106,243,0.85));
  box-shadow: 0 10px 24px rgba(0,0,0,0.45), 0 0 0 2px rgba(255,255,255,0.6) inset;
  opacity: 0.95;
}
